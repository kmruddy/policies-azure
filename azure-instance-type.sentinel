import "tfrun"
import "tfplan"

desired_instance_type = "Standard_D2"
workspace_name = tfrun.workspace.name

print("Checking to make sure the", workspace_name, "workspace is using a", desired_instance_type, "instance type")

configured_instance_type = tfplan.module([]).resources.azurerm_virtual_machine.catapp[0].applied.instance_type

main = rule {
    desired_instance_type == configured_instance_type
}